@page "/coursepages/editcourse"
@page "/coursepages/editcourse/{courseid:guid}"

@inherits EditCourseBase

<h1 class="page-title">Edit Course</h1>

<MudCard>
	<MudForm Model="@model" @ref="@form" @bind-IsValid="@FormValid">
		<MudCardContent>

				<MudTextField @bind-Value="model.Name"
							  Validation="@(courseValidator.ValidateValue)"
							  For="@(() => model.Name)"
							  Immediate="true"
							  Label="Name"/>

				<MudTextField @bind-Value="model.City"
							  Validation="@(courseValidator.ValidateValue)"
							  For="@(() => model.City)"
							  Immediate="true"
							  Label="City" />

				<MudTextField @bind-Value="model.State"
							  Validation="@(courseValidator.ValidateValue)"
							  For="@(() => model.State)"
							  Immediate="true"
							  Label="State" />
                
   				<MudTextField @bind-Value="model.Phone"
							  Validation="@(courseValidator.ValidateValue)"
							  For="@(() => model.Phone)"
							  Immediate="true"
							  Label="Phone" />
        </MudCardContent>
	</MudForm>
    <MudCardActions>
        <MudButton Disabled="@(!FormValid)" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="@(async () => await HandleSubmit())">@ButtonText</MudButton>
		<AuthorizeView Roles="weather.admin">
			<ChildContent>
		        <MudButton Disabled="@(!FormValid)" Variant="Variant.Filled" Color="Color.Error" Class="ml-auto" OnClick="@(async () => await HandleDelete())">Delete</MudButton>		
			</ChildContent>
			<NotAuthorized>
		        <MudButton Disabled="true" Variant="Variant.Filled" Color="Color.Error" Class="ml-auto">Delete</MudButton>
			</NotAuthorized>
		</AuthorizeView>
    </MudCardActions>
</MudCard>
